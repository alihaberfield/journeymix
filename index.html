<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>JourneyMix 1.0</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="assets/css/docs.css" rel="stylesheet">
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="assets/css/font-awesome-ie7.min.css" rel="stylesheet">
    <link href="assets/css/font-awesome.css" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/css/journeymix.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="assets/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="assets/ico/favicon.png">

  </head>

  <body data-spy="scroll" data-target=".bs-docs-sidebar">

    <!-- Navbar
    ================================================== -->
    <!-- <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href="./index.html">JourneyMix</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active">
                <a href="./index.html">Home</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div> -->





<div class="banner-wrap">
  <div class="hero-unit masterhead"> 
  <div class="container">
  
    <h1 class="centered">Journey Mix</h1> <h2 class="centered">Download long music mixes, take them with you</h2>

  <div class="well">
  <div class="accordion" id="accordion1">
  <div class="accordion-group">
  <div class="accordion-heading">
            <a class="accordion-toggle" id="SimpleSearchToggle" data-toggle="collapse" data-parent="#accordion1" href="#collapseOne">
       <i class="icon-search"></i> Simple search <i class="icon-caret-down"></i> 
      </a>
            <a class="accordion-toggle" id="AdvancedSearchToggle" data-toggle="collapse" data-parent="#accordion1" href="#collapseTwo">
       <i class="icon-cog"></i> Advanced search <i class="icon-caret-down"></i> 
      </a>
  </div>
    <div id="collapseOne" class="accordion-body collapse in">
    <div class="accordion-inner">

    
      <p class="centered">I like <select id="choose">
      <option value="house">House</option>
      <option value="punk">Punk</option>
      <option value="techno">Techno</option>
      <option value="rock">Rock</option>
      <option value="chill">Chill</option>
      </select> music.      I am <select id="activity">
      <option value="running">going running</option>
      <option value="walking">going for a walk</option>
      <option value="cycling">cycling</option>
      <option value="workout">working out</option>
      <option value="cooking">cooking</option>
      <option value="bath">taking a bath</option>
      </select> for <input type="number" id="input_length" placeholder="45" value="45"> minutes.
      </p>
      <p class="centered">
      <button class="btn btn-success btn-large" type="button" id="showTracks"><i class="icon-music"> </i> Mix my journey</button>
    </p>
    
      </div>
    </div>
  </div>
    
  <div class="accordion-group">
    <div id="collapseTwo" class="accordion-body collapse">
    <div class="accordion-inner">
      

      <p>Search for any genre: <input type="text" id="free-genre" placeholder="Heavy metal" value="Heavy metal"> </p>
      <p>Length from <input type="number" id="adv-length-min" placeholder="45" value="45"> to <input type="number" id="adv-length-max" placeholder="300" value="300"> minutes</p>
      <p>Search for keyword <input type="text" id="keyword" placeholder="keyword"> </p>
      <p>Search for bpm from: <input type="number" id="bpm-min" placeholder="0" value="0"> to: <input type="number" id="bpm-max" placeholder="300" value="300"></p>
      <p class="centered">
        <button class="btn btn-success btn-large" type="button" id="advancedShowTracks"><i class="icon-music"></i> Show me tracks</button>
      </p>
      </div> <!-- end well -->
      </div><!-- end accordion-inner -->
    </div><!-- end accordion-group -->
  </div><!-- end accordion-group -->
</div> <!-- end accordion -->


</div>
</div> <!-- end hero -->
</div> <!--end banner-wrap -->

<div class="social-media">
  <div class="container">
    <ul>
      <li><i class="icon-twitter"></i>Follow us on Twitter: <li> <a href="http://twitter.com/alihaberfield">@alihaberfield</a> </li> <li><a href="http://twitter.com/ilonaryv">@ilonaryv</a></li><li> <a href="http://www.twitter.com/sulagarcia">@sulagarcia</a></li></li>
      <li><i class="icon-github"></i> <a href="https://github.com/alihaberfield/journeymix">Fork us on GitHub</a></li>
      
  </div>
</div>

<div class="container">

<p id="searchEcho"></p>


<div id="list_tracks">

</div>
<div id="iframe_div" class="hide">
  <iframe id="sc-widget" width="100%" height="166" scrolling="no" frameborder="no" src=""></iframe>    
</div> <!-- end iframe_div -->

<div class="row explain">
        <div class="span4">
          <p class="pull-quote"><i class="icon-quote-left"></i>The journey is long.<br/>Take the music with you.<i class="icon-quote-right"></i></p>
        </div>
        <div class="span8">
          <p>Journey Mix finds long music mixes on SoundCloud that you can take with you when you go running, cycling, walking or anything else you need a soundtrack for. We look through SoundCloud's huge library of Creative Commons-licensed, downloadable tracks from talented artists to find the perfect soundtracks to your journeys.</p>
           <p>Journey Mix is powered by <a href="http://www.soundcloud.com">SoundCloud</a>.</p>
       </div>
          
         
                  
      </div>


</div> <!-- end container -->


    <!-- Footer
    ================================================== -->
<footer class="footer">
      <div class="container">
        <div class="row">
          <div class="span8">
        <p>Journey Mix 1.0 is a product of the inaugural <a href="#">Berlin Geekettes</a> all-woman Hackathon, March 2013.</p> <p>Built with sweat and joy by Ali (<a href="http://twitter.com/alihaberfield">@alihaberfield</a>), Ilona (<a href="http://twitter.com/ilonaryv">@ilonaryv</a>) and Sulamita (<a href="http://www.twitter.com/sulagarcia">@sulagarcia</a>).</p>
        <p>JourneyMix is built on the Hackathon-friendly Bootstrap framework, using FontAwesome icons. The banner image sourced from <a href="http://http://www.webdesignhot.com/free-vector-graphics/abstract-rainbow-wave-with-music-node-background/">www.webdesignhot.com</a>, used with a Creative Commons Attribution 3 license.</p>
      </div>
      <div class="span4">
            <a href="http://www.soundcloud.com"><img src="assets/img/soundcloud.png"></a>
        </div>
        </div>
      </div>
    </footer>



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
    <script src="assets/js/jquery.js"></script>
    <script src="assets/js/bootstrap-transition.js"></script>
    <script src="assets/js/bootstrap-alert.js"></script>
    <script src="assets/js/bootstrap-modal.js"></script>
    <script src="assets/js/bootstrap-dropdown.js"></script>
    <script src="assets/js/bootstrap-scrollspy.js"></script>
    <script src="assets/js/bootstrap-tab.js"></script>
    <script src="assets/js/bootstrap-tooltip.js"></script>
    <script src="assets/js/bootstrap-popover.js"></script>
    <script src="assets/js/bootstrap-button.js"></script>
    <script src="assets/js/bootstrap-collapse.js"></script>
    <script src="assets/js/bootstrap-carousel.js"></script>
    <script src="assets/js/bootstrap-typeahead.js"></script>
    <script src="assets/js/bootstrap-affix.js"></script>

    <script src="assets/js/holder/holder.js"></script>
    <script src="assets/js/google-code-prettify/prettify.js"></script>

    <script src="assets/js/application.js"></script>

    <script src="http://connect.soundcloud.com/sdk.js"></script>
    <script src="https://w.soundcloud.com/player/api.js" type="text/javascript"></script>

    <script>
    var sc_id =  '04f21e83ba014f8a83517ef424ec79b6'

    SC.initialize({
      client_id: sc_id
    });

    //Hide and show accordion titles 



    function convertFromMS(ms) {
      var d, h, m, s;  
      s = Math.floor(ms / 1000); 
      m = Math.floor(s / 60);  
      s = s % 60;
      h = Math.floor(m / 60);
      m = m % 60;
      d = Math.floor(h / 24);
      h = h % 24;  
      return "" + h + " hour : " + m + " mins";
    };


    var widgetIframe = document.getElementById('sc-widget');
    var widget       = SC.Widget(widgetIframe);


    function advancedSearch() {
      $('#list_tracks').empty();
      $('#iframe_div').empty();
      $('#iframe_div').css('display', 'block');

      var genreValue = $("#free-genre").val();
      var advMinLength = $("#adv-length-min").val();
      var longMinLength = (advMinLength*60000);
      var advMaxLength = $("#adv-length-max").val();
      var longMaxLength = (advMaxLength*60000);
      var keywords = $("#keyword").val();
      var bpmMin = $("#bpm-min").val();
      var bpmMax = $("#bpm-max").val();


      
      $("#searchEcho").html("<p>You searched SoundCloud for <strong>" + genreValue + "</strong> tracks from <strong>" + advMinLength + "</strong> to <strong>" + advMaxLength + "</strong> minutes, and with keywords <strong>" + keywords + "</strong> and with <strong>" + bpmMin + "</strong> to <strong>" + bpmMax + "</strong> beats per minute.</p><p> Here are some Journey Mixes:</p>");

      //Search by BPM is not working- needs testing.

      SC.get('/tracks', { genres: genreValue, q: keywords, duration: {from:longMinLength, to:longMaxLength}, bpm: {from:bpmMin, to:bpmMax} }, function(tracks) {
      var count = 0;
      $(tracks).each(function(index, track) {
        var length_readable = convertFromMS(track.duration);
        if (track.downloadable && (count < 5)) {          
          $('#iframe_div').append($('<li></li>').html('<h3><a href="' + track.permalink_url + '">' + track.title +  '</a>' + ' - ' + length_readable + ' <a class="btn btn-warning" href="' + track.download_url + '?client_id=' + sc_id + '">' + "Download now" + '</a> <!-- <a class="btn btn-primary" href="#">Share</a> --></h3>' + '<iframe id="sc-widget" width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F' + track.id + '&show_artwork=true"></iframe> '));
            count++;
        }
      });

    });      

    }



    function getTracks() {
      $('#list_tracks').empty();

      var genreValue = $("#choose").val();
      var inputLength = $("#input_length").val();
      var inputMax = (inputLength*1.2);
      var minLength = (inputLength*60000);
      var maxLength = (minLength*1.2);
      var activityName = $("#activity").val();

      $("#searchEcho").html("<p>You searched SoundCloud for <strong>" + genreValue + "</strong> tracks from <strong>" + inputLength + "</strong> to <strong>" + inputMax + "</strong> minutes for <strong>" + activityName + "</strong> to.</p><p> Here is your Journey Mix:</p>");
      
      SC.get('/tracks', { genres: genreValue, duration: {from:minLength, to:maxLength} }, function(tracks) {
      var count = 0;
      $(tracks).each(function(index, track) {
  
        var duration_readable = convertFromMS(track.duration);
        if (track.downloadable && (count < 1)) { 
        console.log(track);         
          $('#list_tracks').append($('<li></li>').html('<h3><a href="' + track.permalink_url + '">' + track.title + '</a>' + ' - ' + duration_readable + ' - ' + '<a class="btn btn-warning" href="' + track.download_url + '?client_id=' + sc_id + '">' + "Download now" + '</a> <!-- <a class="btn btn-primary" href="#">Share</a> --></h3> <div id="iframe_div"><iframe id="sc-widget" width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F'  + track.id + '&show_artwork=true"></iframe></div> ' ));
            count++;
            console.log(count);
            console.log(duration_readable);
            
            
        }
      });

    });      

    }
    
 
    $("#showTracks").click(getTracks);
    $("#advancedShowTracks").click(advancedSearch);

    </script>



  </body>
</html>
